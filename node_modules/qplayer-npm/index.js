exports.qPlayer = function (id, params, callbackFunction) {

    var url = "https://player-static.qencode.com/release/qencode-bootstrapper.min.js"

    function loadScript(url, callback){
        // Adding the script tag to the head
        var head = document.head;
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = url;
    
        // Then bind the event to the callback function.
        script.onreadystatechange = callback;
        script.onload = callback;

        // Fire the loading
        head.appendChild(script);
    }

    var runAfterScriptsLoaded = function() {
        // double check if the player is there
        if(window.qPlayer){
            // initiate player
            window.qPlayer(id, params, callbackFunction);
        }       
    };    

    loadScript(url, runAfterScriptsLoaded);
 
}

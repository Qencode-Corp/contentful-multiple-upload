import b, { forwardRef, useState, useCallback } from 'react';
import { cx, css } from 'emotion';
import { Box, Flex, getEntityStatusStyles } from '@contentful/f36-core';
import { EntityStatusBadge } from '@contentful/f36-badge';
import { Asset } from '@contentful/f36-asset';
import { Skeleton } from '@contentful/f36-skeleton';
import { DragHandle } from '@contentful/f36-drag-handle';
import n from '@contentful/f36-tokens';
import { Heading, Text, Subheading, Paragraph } from '@contentful/f36-typography';
import { IconButton } from '@contentful/f36-button';
import { MoreHorizontalIcon } from '@contentful/f36-icons';
import { Menu } from '@contentful/f36-menu';
import Pr from 'truncate';
import { Tooltip } from '@contentful/f36-tooltip';

var Or=Object.defineProperty,jr=Object.defineProperties;var Yr=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var dr=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable;var ir=(r,e,t)=>e in r?Or(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,p=(r,e)=>{for(var t in e||(e={}))dr.call(e,t)&&ir(r,t,e[t]);if($)for(var t of $(e))pr.call(e,t)&&ir(r,t,e[t]);return r},c=(r,e)=>jr(r,Yr(e));var x=(r,e)=>{var t={};for(var o in r)dr.call(r,o)&&e.indexOf(o)<0&&(t[o]=r[o]);if(r!=null&&$)for(var o of $(r))e.indexOf(o)<0&&pr.call(r,o)&&(t[o]=r[o]);return t};var lr=()=>({contentBody:css({gridColumn:"content",gridRow:"content",whiteSpace:"initial"}),wrapper:css({flex:"1 1 0",display:"grid",gridTemplateRows:"[header] auto [content] minmax(0, 1fr)",gridTemplateColumns:"auto [content] minmax(0, 1fr)"}),dragHandle:css({borderBottomLeftRadius:n.borderRadiusMedium,borderTopLeftRadius:n.borderRadiusMedium,cursor:"grab"}),root:({hasHeader:r,isHovered:e,isSelected:t})=>{let o={backgroundColor:n.colorWhite,borderColor:n.gray300,borderRadius:n.borderRadiusMedium,borderStyle:"solid",borderWidth:1,color:n.gray900,display:"flex",textAlign:"left",width:"100%",fontSize:n.fontSizeM,fontWeight:n.fontWeightNormal,position:"relative",textDecoration:"none",margin:0,transition:`border-color ${n.transitionDurationDefault} ${n.transitionEasingDefault},
    box-shadow ${n.transitionDurationShort} ${n.transitionEasingDefault}`,"&:focus":css({borderColor:t?n.blue100:n.blue500,boxShadow:n.glowPrimary,outline:"none"}),"&:focus:not(:focus-visible)":css({borderColor:t?n.blue500:n.gray300,boxShadow:"unset"}),"&:focus-visible":css({borderColor:n.blue500,boxShadow:n.glowPrimary})};return r||(o.paddingTop=n.spacingM),e&&(o.borderColor=n.blue500,o.cursor="pointer"),t&&(o.backgroundColor=n.blue100,o.borderColor=n.blue500),css(o)},skeleton:css({border:`1px solid ${n.gray300}`,borderRadius:n.borderRadiusMedium,padding:n.spacingM})});var mr=()=>({root:css({minHeight:"auto",padding:n.spacing2Xs})});var k=({buttonProps:r,children:e})=>{let t=mr();return b.createElement(Menu,null,b.createElement(Menu.Trigger,null,b.createElement(IconButton,c(p({"aria-label":"Actions",icon:b.createElement(MoreHorizontalIcon,null)},r),{className:cx(t.root,r==null?void 0:r.className),size:"small",variant:"transparent",testId:"cf-ui-card-actions"}))),b.createElement(Menu.List,null,e))};var ee=()=>({header:css({columnGap:n.spacingXs,rowGap:n.spacing2Xs,alignItems:"center",borderBottomColor:n.gray200,borderBottomStyle:"solid",borderBottomWidth:1,borderTopLeftRadius:n.borderRadiusMedium,borderTopRightRadius:n.borderRadiusMedium,boxSizing:"border-box",color:n.gray600,fontSize:n.fontSizeM,fontWeight:n.fontWeightNormal,gridColumn:"content",gridRow:"header",lineHeight:n.lineHeightM,paddingBottom:n.spacingXs,paddingLeft:n.spacingM,paddingRight:n.spacingXs,paddingTop:n.spacingXs,minHeight:"37px"}),headerWithActions:css({paddingBottom:n.spacing2Xs,paddingRight:n.spacingXs,paddingTop:n.spacing2Xs})}),Y=r=>{r.preventDefault(),r.stopPropagation();},X=r=>{let{icon:e,type:t,actions:o,actionsButtonProps:a,badge:l}=r,m=ee();return b.createElement(Flex,{flexWrap:"wrap",className:cx(m.header,o&&m.headerWithActions)},b.createElement(Flex,{flexGrow:1},t&&b.createElement(Text,{fontColor:"gray600",isWordBreak:!0},t)),e&&b.createElement(Flex,{alignItems:"center"},e),l&&b.createElement(Flex,{alignItems:"center"},l),o&&o.length>0&&b.createElement(Flex,{onClick:Y,alignItems:"center"},b.createElement(k,{buttonProps:a},o)))};X.displayName="DefaultCardHeader";var ie="article";function cr(Te,kr){var or=Te,{actions:r,actionsButtonProps:e,ariaLabel:t,badge:o,children:a,className:l,contentBodyProps:m,header:f,href:y,icon:C,isDragging:s=!1,isHovered:d,isSelected:B=!1,onBlur:H,onClick:E,onFocus:h,onKeyDown:A,onMouseEnter:P,onMouseLeave:M,target:O,rel:_r,testId:wr="cf-ui-base-card",title:Q,type:Z,withDragHandle:rr,dragHandleRender:er,isLoading:Rr}=or,tr=x(or,["actions","actionsButtonProps","ariaLabel","badge","children","className","contentBodyProps","header","href","icon","isDragging","isHovered","isSelected","onBlur","onClick","onFocus","onKeyDown","onMouseEnter","onMouseLeave","target","rel","testId","title","type","withDragHandle","dragHandleRender","isLoading"]);let F=lr(),[vr,nr]=useState(d!=null?d:!1),ar=!!(E||y||rr),Fr=!!f,Nr=Z||C||o||r?b.createElement(X,{type:Z,icon:C,badge:o,actions:r,actionsButtonProps:e}):null,Wr=useCallback(u=>{h&&h(u);},[h]),Xr=useCallback(u=>{H&&H(u);},[H]),Gr=useCallback(u=>{nr(!0),P&&P(u);},[P]),Ur=useCallback(u=>{nr(!1),M&&M(u);},[M]),$r=E?u=>{E(u);}:void 0,zr=useCallback(u=>{A&&A(u);},[A]);if(Rr)return b.createElement(Skeleton.Container,{className:F.skeleton,svgHeight:"5.6rem"},b.createElement(Skeleton.DisplayText,{numberOfLines:1}),b.createElement(Skeleton.BodyText,{numberOfLines:1,offsetTop:35}));let sr=b.createElement(DragHandle,{className:F.dragHandle,isActive:s,label:"Reorder entry",onClick:Y});return b.createElement(Box,c(p({"aria-label":Q||t,"aria-pressed":tr.as==="button"?B?"true":"false":void 0,as:ie,className:cx(F.root({hasHeader:Fr,isHovered:vr,isSelected:B}),l),href:y,onBlur:Xr,onClick:$r,onFocus:Wr,onMouseEnter:typeof d=="undefined"&&ar?Gr:void 0,onMouseLeave:typeof d=="undefined"&&ar?Ur:void 0,onKeyDown:zr,rel:y&&(_r||"noreferrer"),role:E&&!y?"button":void 0,tabIndex:E?0:void 0,target:O},tr),{ref:kr,testId:wr,title:Q}),rr?er?er({drag:sr,isDragging:s}):sr:null,b.createElement("div",{className:F.wrapper,"data-card-part":"wrapper"},f!=null?f:Nr,b.createElement("div",{className:F.contentBody,"data-card-part":"content"},a)))}cr.displayName="BaseCard";var S=forwardRef(cr);var gr=()=>({root:({size:r})=>css({display:"inline-flex",width:"auto",borderRadius:n.borderRadiusMedium,minWidth:`calc(1rem * (120 / ${n.fontBaseDefault}))`,height:r==="small"?`calc(1rem * (188 / ${n.fontBaseDefault}))`:`calc(1rem * (300 / ${n.fontBaseDefault}))`,padding:0,textAlign:"center"}),asset:css({height:"100%"}),skeleton:css({border:`1px solid ${n.gray300}`,borderRadius:n.borderRadiusMedium,padding:n.spacingM})});var ur=H=>{var E=H,{actions:r,className:e,icon:t=null,isSelected:o,size:a="default",src:l,status:m,title:f,type:y,withDragHandle:C=!1,isLoading:s,testId:d="cf-ui-asset-card"}=E,B=x(E,["actions","className","icon","isSelected","size","src","status","title","type","withDragHandle","isLoading","testId"]);let h=gr(),A=m?b.createElement(EntityStatusBadge,{entityStatus:m}):null,P=t||A||r?b.createElement(X,{icon:t,badge:A,actions:r}):null;return s?b.createElement(Skeleton.Container,{className:h.skeleton,svgWidth:a==="default"?"18rem":"11rem",svgHeight:a==="default"?"18.75rem":"12rem"},b.createElement(Skeleton.Image,{width:"100%",height:"18.75rem"})):b.createElement(S,c(p({},B),{badge:A,className:cx(h.root({size:a}),e),header:P,isSelected:o,title:f,withDragHandle:C,testId:d}),b.createElement(Flex,{alignItems:"center",fullHeight:!0,justifyContent:"center"},b.createElement(Asset,{className:h.asset,src:l,status:m,title:f,type:y})))};var fe=r=>{switch(r){case"large":return n.spacingL;case"none":return 0;default:return n.spacingM}},Er=({padding:r})=>({header:css({gridColumn:"content",gridRow:"header",marginBottom:n.spacingM}),root:css({padding:fe(r)})});function hr(C,y){var s=C,{actions:r,badge:e,icon:t,padding:o="default",title:a,className:l,testId:m="cf-ui-card"}=s,f=x(s,["actions","badge","icon","padding","title","className","testId"]);let d=Er({padding:o}),B=!!(a||t||e||r);return b.createElement(S,c(p({className:cx(d.root,l)},f),{testId:m,header:B&&b.createElement(Flex,{alignItems:"center",className:cx(d.header)},a&&b.createElement(Flex,{as:"header",flexGrow:1},b.createElement(Heading,{marginBottom:"none"},a)),t&&b.createElement(Flex,{alignItems:"center",marginLeft:"spacingXs"},t),e&&b.createElement(Flex,{alignItems:"center",marginLeft:"spacingXs"},e),r&&b.createElement(k,null,r)),ref:y}))}hr.displayName="Card";var br=forwardRef(hr);var Br=()=>({actionsButton:css({borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderTopRightRadius:n.borderRadiusMedium}),content:r=>css({gridColumn:"content",marginTop:r==="small"?n.spacingXs:n.spacingS,marginBottom:r==="small"?`calc(-1 * ${n.spacingXs})`:0}),root:css({padding:0,'[data-card-part="content"]':{paddingBottom:n.spacingM,paddingLeft:n.spacingM,paddingRight:n.spacingM}}),header:css({borderBottomWidth:1,borderBottomColor:n.gray200,borderBottomStyle:"solid",minHeight:"auto",paddingBottom:n.spacingXs,paddingLeft:n.spacingM,paddingRight:n.spacingXs}),thumbnail:r=>css(p({margin:`0 0 0 ${n.spacingS}`,padding:0,overflow:"hidden",position:"relative",img:{width:"100%",height:"100%",objectFit:"cover",position:"absolute",zIndex:1}},r==="small"?{height:"40px",width:"40px"}:{height:"70px",width:"70px"}))});var he="article";function Tr({title:r,titleTag:e}){if(!r)return null;let t=Pr(r,255,{});return b.createElement(Subheading,{title:r.length>255?r:"",testId:"title",as:e,marginBottom:"none",isWordBreak:!0},t)}Tr.displayName="EntryCardTitle";function Ir({description:r,size:e}){if(!r||e==="small")return null;let t=Pr(r,95,{});return b.createElement(Paragraph,{marginBottom:"none",isWordBreak:!0},t)}Ir.displayName="EntryCardDescription";function Sr(A,h){var P=A,{actions:r,children:e,className:t,src:o,status:a,thumbnailElement:l,description:m,withDragHandle:f=!1,title:y,titleTag:C="h2",size:s,testId:d="cf-ui-entry-card",contentType:B,badge:H}=P,E=x(P,["actions","children","className","src","status","thumbnailElement","description","withDragHandle","title","titleTag","size","testId","contentType","badge"]);let M=Br(),O=a?b.createElement(EntityStatusBadge,{entityStatus:a}):null;return b.createElement(S,c(p({as:he},E),{actions:r,badge:H||O,className:cx(M.root,t),withDragHandle:f,ref:h,type:B,testId:d}),b.createElement(Flex,{alignItems:"center",className:M.content(s),flexDirection:"row"},b.createElement(Flex,{flexDirection:"column",flexGrow:1,gap:"spacingS"},b.createElement(Tr,{title:y,titleTag:C}),b.createElement(Ir,{size:s,description:m}),e),l&&s!=="small"&&b.createElement("figure",{className:M.thumbnail(s)},l)))}Sr.displayName="EntryCard";var Dr=forwardRef(Sr);var Hr=()=>({actions:css({display:"flex",padding:0,marginLeft:n.spacingXs,minHeight:"auto"}),root:({status:r})=>{let e=getEntityStatusStyles({status:r});return css({borderBottomLeftRadius:0,borderTopLeftRadius:0,display:"inline-flex",width:"auto",verticalAlign:"middle",paddingBottom:0,paddingTop:0,paddingLeft:n.spacingS,paddingRight:n.spacing2Xs,'[data-card-part="wrapper"]':{display:"inline-flex",flexDirection:"row-reverse"},"&::before":{backgroundColor:e.color,bottom:0,content:'""',display:"block",left:0,position:"absolute",top:0,width:n.spacing2Xs}})},skeleton:css({display:"inline-flex",border:`1px solid ${n.gray300}`,borderTopRightRadius:n.borderRadiusMedium,borderBottomRightRadius:n.borderRadiusMedium,padding:n.spacingXs})});var Lr=y=>{var C=y,{actions:r,className:e,children:t,status:o,title:a,isLoading:l,testId:m="cf-ui-inline-entry-card"}=C,f=x(C,["actions","className","children","status","title","isLoading","testId"]);let s=Hr(),d=b.createElement(k,{buttonProps:{className:s.actions}},r);return l?b.createElement(Skeleton.Container,{className:s.skeleton,svgHeight:"1.25rem",svgWidth:"6rem"},b.createElement(Skeleton.BodyText,{numberOfLines:1})):b.createElement(Tooltip,{placement:"bottom",content:a},b.createElement(S,c(p({},f),{className:cx(s.root({status:o}),e),header:d,testId:m}),t||b.createElement(Text,null,a)))};

export { ur as AssetCard, br as Card, Dr as EntryCard, Lr as InlineEntryCard };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map